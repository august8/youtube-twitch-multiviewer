# 決定記録ガイド

このドキュメントでは、技術的決定を記録する方法とタイミングを説明します。
実際の記録は `docs/DECISIONS.md` に行ってください。

## 記録すべきタイミング

以下のような場面で、技術的決定を記録してください：

### 1. 技術選定時
- ライブラリ・フレームワークの選択
- データベースの選択
- 認証方式の決定
- パッケージマネージャーの選択

### 2. アーキテクチャ決定時
- ディレクトリ構造の決定
- 状態管理の方法
- API設計の方針
- モジュール分割の方針

### 3. 問題解決の分岐点
- 複数の解決策があり、どれかを選んだ時
- トレードオフを検討した結果
- パフォーマンスと可読性の選択

### 4. 制約による決定
- パフォーマンス要件による選択
- セキュリティ要件による選択
- 予算・時間制約による選択
- 互換性・依存関係による制約

### 5. 方針変更時
- 以前の決定を覆す時
- 大きな仕様変更があった時
- リファクタリングの方針決定

## 記録フォーマット

以下のフォーマットで `docs/DECISIONS.md` に記録してください：

```markdown
## [YYYY-MM-DD] トピック名 (Topic Name)

**キーワード**: keyword1, keyword2, 用語1, 用語2

**質問**: 
[決定が必要な内容]

**選択肢**:
- Option A: [選択肢1]
- Option B: [選択肢2]
- Option C: [選択肢3]

**✓ 採用**: Option X ([選択した内容])

**理由**:
- [選択した理由1]
- [選択した理由2]

**× 不採用**:
- Option Y: [不採用の理由]
- Option Z: [不採用の理由]

**関連技術**: [使用するライブラリやツール名]

---
```

## 記録例

### [2026-01-10] 認証方式 (Authentication Method)

**キーワード**: JWT, authentication, token, セッション

**質問**: 
ユーザー認証の実装方式をどうするか

**選択肢**:
- Option A: JWT + Refresh Token
- Option B: Session-based Authentication  
- Option C: OAuth 2.0

**✓ 採用**: Option A (JWT + Refresh Token)

**理由**:
- ステートレス (stateless) でスケールしやすい
- モバイルアプリとの連携も想定
- リフレッシュトークンでセキュリティ確保

**× 不採用**:
- Option B: サーバー側でセッション管理が必要、スケーラビリティに課題
- Option C: 外部認証プロバイダーは今回のスコープ外

**関連技術**: express-jwt, jsonwebtoken, refresh token rotation

---

## 記録のポイント

1. **キーワードを明記**: 後から検索しやすいよう、日本語と英語を併記
2. **理由を明確に**: なぜその選択をしたのか、将来の自分が理解できるように
3. **不採用理由も記録**: 同じ議論を繰り返さないため
4. **関連技術を記載**: 具体的なライブラリ名やツール名で検索性向上
5. **時系列で記録**: 新しい決定は下に追記（古い記録は上）

## 記録先

実際の記録は **`docs/DECISIONS.md`** に行ってください。

---

**最終更新**: 2026-01-10
